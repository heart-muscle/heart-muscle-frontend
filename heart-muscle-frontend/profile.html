<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">

    <!-- Facebook Meta Tags / 페이스북 오픈 그래프 -->
    <meta property="og:url" content="http://kindtiger.dothome.co.kr/insta">
    <meta property="og:type" content="website">
    <meta property="og:title" content="instagram">
    <meta property="og:description" content="instagram clone">
    <meta property="og:image" content="http://kindtiger.dothome.co.kr/insta/imgs/instagram.jpeg">
    .
    <!-- Twitter Meta Tags / 트위터 -->
    <meta name="twitter:card" content="instagram clone">
    <meta name="twitter:title" content="instagram">
    <meta name="twitter:description" content="instagram clone">
    <meta name="twitter:image" content="http://kindtiger.dothome.co.kr/insta/imgs/instagram.jpeg">

    <!-- Google / Search Engine Tags / 구글 검색 엔진 -->
    <meta itemprop="name" content="instagram">
    <meta itemprop="description" content="instagram clone">
    <meta itemprop="image" content="http://kindtiger.dothome.co.kr/insta/imgs/instagram.jpeg">


    <title>instagram</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/profile.css">
    <link rel="shortcut icon" href="imgs/instagram.png">

    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

</head>

<script>

    var search = location.search
    console.log("search: ", search)
    var params = new URLSearchParams(search);
    console.log("params: ", params)
    var id = params.get('id');
    console.log("getType: ", id)

    $(document).ready(function () {
        getUser(id);
    })

    function getUser() {
        $.ajax({
            type: "GET",
            url: `/user/${id}`,
            success: function (response) {
                console.log("유저테이블가져오기", response)
                feed = response['feeds']
                feedCount = response['feeds'].length;
                username = response['username']

                console.log("feedLength", feedCount)

                $("#nickname").html(response['nickname']);
                $("#image").attr("src", response['imgUrl']);
                $("#feedCount").html(response['feeds'].length);

                for (let i = 0; i < feed.length; i++) {
                    let url = feed[i]['imageUrl']
                    console.log("url", url)

                    let tempHtml = `
                                    <div class="pic">
                                        <a href="#"><img src="${url}" alt=""></a>
                                    </div>
                                    `

                    $('#userFeed').append(tempHtml)
                }
            }
        })

    }

    function edit() {
        window.location.href = 'profile_edit.html?id=' + id
    }

    function logout(){
        localStorage.clear()
        window.location.href="login.html"
    }

</script>

<body>


<section id="container">

    <header id="header">
        <section class="h_inner">

            <h1 class="logo">
                <a href="index.html">
                    <div class="sprite_insta_icon"></div>
                    <div>
                        <div class="sprite_write_logo"></div>
                    </div>
                </a>
            </h1>

            <div class="search_field">
                <input type="text" placeholder="검색" tabindex="0">

                <div class="fake_field">
                    <span class=sprite_small_search_icon></span>
                    <span>검색</span>
                </div>
            </div>


            <div class="right_icons">
                <a href="feedSave.html"><div class="sprite_camera_icon"></div></a>
                <a href="login.html"><div class="sprite_compass_icon"></div></a>
                <a href="qna-list.html"><div class="sprite_bubble_icon"></div></a>
                <a href="follow.html"><div class="sprite_heart_icon_outline"></div></a>
                <a href="profile.html"><div class="sprite_user_icon_outline"></div></a>
            </div>
        </section>
    </header>


    <div id="main_container">

        <section class="b_inner">

            <div class="hori_cont">
                <div class="profile_wrap">
                    <div class="profile_img">
                        <img id="image" alt="착한호랑이">
                    </div>
                </div>

                <div class="detail">
                    <div class="top">
                        <div class="user_name" id="nickname">KindTiger</div>
                        <a onclick="edit()" class="profile_edit">프로필편집</a>
                        <a class="logout" onclick="logout()">로그아웃</a>
                    </div>

                    <ul class="middle">
                        <li>
                            <span>게시물</span>
                            <div id="feedCount"></div>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="mylist_contents contents_container active" id="userFeed">
            </div>

        </section>
    </div>


</section>


<!--<script src="js/insta.js"></script>-->
<script src="js/profile.js"></script>
<script>



</script>
</body>
</html>