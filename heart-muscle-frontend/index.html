<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <title>Title</title>

  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/common.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/image.css">


  <!-- JQuery-->
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>


</head>

<script>

  // let apiUrl = "http://heartmuscle-env.eba-v2mbdfk2.ap-northeast-2.elasticbeanstalk.com/"
  let apiUrl = "http://localhost:8080"

  $(document).ready(function () {
    feed_list();
  });

  function feed_list() {

    $('#post').empty();

    $.ajax({
      type: "GET",
      url: apiUrl + `/feed`,
      success: function (response) {
        console.log(response)

        for (let i = 0; i < response.length; i++) {
          let title = response[i]['title']
          let id = response[i]['id']
          let url = response[i]['imageUrl']
          let username = response[i]['username']
          console.log(id)

          let tempHtml = `
                                    <article class="contents">
                                        <header class="top">
                                            <div class="user_container">
                                                <div class="user_name">
                                                    <div class="nick_name m_text"><a href="profile.html?id=${username}">${username}</a></div>
                                                </div>

                                            </div>

                                            <div class="sprite_more_icon" data-name="more">
                                                <ul class="toggle_box">
                                                    <li><input type="submit" class="follow" value="팔로우" data-name="follow"></li>
                                                    <li>수정</li>
                                                    <li>삭제</li>
                                                </ul>
                                            </div>
                                        </header>

                                        <div class="img_section">
                                            <div class="trans_inner">
                                                <div><img src="${url}" class="card-img-top image-size" alt="..."></div>
                                            </div>
                                        </div>

                                        <div class="comment_container">
                                            <div class="comment" id="comment-list-ajax-post37">
                                                <div class="comment-detail">
                                                    <div class="nick_name m_text"><a href="feedDetail.html?id=${id}">${title}</a></div>
                                                </div>
                                            </div>
                                            <div class="small_heart">
                                                <div class="sprite_small_heart_icon_outline"></div>
                                            </div>
                                        </div>

                                        <div class="timer">1시간 전</div>

                                        <div class="comment_field" id="add-comment-post37">
                                            <input type="text" placeholder="댓글달기...">
                                            <div class="upload_btn m_text" data-name="comment">게시</div>
                                        </div>
                                    </article>
                                    `

          $('#feed').append(tempHtml)
        }
      }
    })
  }

</script>
<body>


<section id="container">


  <header id="header">
    <section class="inner">

      <h1 class="logo">
        <a href="index.html">
          <div class="sprite_insta_icon"></div>
          <div class="sprite_write_logo"></div>
        </a>
      </h1>

      <div class="search_box">
        <input type="text" placeholder="검색" id="search-field">

        <div class="fake_field">
          <span class="sprite_small_search_icon"></span>
          <span>검색</span>
        </div>
      </div>

      <div class="right_icons">
        <a href="feedSave.html"><div class="sprite_camera_icon"></div></a>
        <a href="login.html"><div class="sprite_compass_icon"></div></a>
        <a href="follow.html"><div class="sprite_heart_icon_outline"></div></a>
        <a href="profile.html"><div class="sprite_user_icon_outline"></div></a>
      </div>

    </section>

  </header>

  <section id="main_container">
    <div style="margin: auto">

      <div class="contents_box" id="feed" style="align-content: center">
      </div>
      <input type="hidden" id="page" value="1">

    </div>
  </section>



</section>








<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<script src="js/main.js"></script>
</body>
</html>